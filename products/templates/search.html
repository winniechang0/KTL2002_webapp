{% extends 'base.html' %}

{% block body %}

<h1> Search result of {{search}}</h1>
<ul>
    {% for result in products %}
    <div style="width:250px;height:308 ;display: inline-block; padding:5px; margin:5px" class="border rounded">
        <div>{{result.user.username}}</div>
        <div style="font-size: 10px;">{{result.user.profileuser.location_station.station_name}}</div>
        <div><b>{{result.Offer_key.Product_title}}</b></div>
        <!-- {{result.Product_image}} -->
        {% if result.Offer_key.Product_image %}
        <img src="{{result.Offer_key.Product_image}}" width="200px"/>
        {% else %}
        <div style="width: 200px;height:200px;background-color: darkgrey;padding: auto;">No Image</div>
        {% endif %}
        <form action="" method="POST">
            {% csrf_token %}
            <input type="hidden" name="result" value='{{result.Offer_key.Product_asin}}'/>
            <input type="hidden" name="user_object" value='{{result.user.id}}' />
            {% if result.id in like_list %}
            <input type="submit" value="Unlike" class="btn btn-primary">
            {% else %}
            <input type="submit" value="Like" class="btn btn-primary">
            {% endif %}
        </form>
        
    </div>
    {% endfor %}
</ul>
<script>
//    function AjaxFormSubmit(event) {
//             // Stop form from submitting normally
//             event.preventDefault();
//             var friendForm = $(this);
//             // Send the data using post
//             var posting = $.post(friendForm.attr('action'), friendForm.serialize());
//             // if success:
//             posting.done(function (data) {
//                 // success actions, maybe change submit button to 'friend added' or whatever
//             });
//             // if failure:
//             posting.fail(function (data) {
//                 // 4xx or 5xx response, alert user about failure
//             })
//    }
</script>

{% endblock %}